<style>
    .postitem {
        width: 70%;
    }

</style>

<div class="postitem">
  <%= form_for @post, html: { class: 'post-form' } do |f| %>
    <% if @is_link %>
      <div>
        <%= f.label :url do %>
          <%= content_tag :span, 'URL', style: 'text-transform: uppercase;' %>
        <% end %>
        <%= f.text_field :url, required: true %>
        <% if @post.errors[:url].any? %>
          <div class="error-message">
            <%= @post.errors[:url].join(", ") %>
          </div>
        <% end %>
      </div>
    <% end %>

    <div>
      <%= f.label :title %>
      <%= f.text_area :title, required: true, oninput: 'autoResize(this)' %>
      <% if @post.errors[:title].any? %>
        <div class="error-message">
          <%= @post.errors[:title].join(", ") %>
        </div>
      <% end %>
    </div>

    <div>
      <%= f.label :body %>
      <%= f.text_area :body, class: 'body-textarea', oninput: 'autoResize(this)' %>
      <% if @post.errors[:body].any? %>
        <div class="error-message">
          <%= @post.errors[:body].join(", ") %>
        </div>
      <% end %>
    </div>

    <div>
      <%= f.label :magazine %>
      <%= f.collection_select :magazine_id, @magazines, :id, :name, {prompt: 'Select a magazine'}, {required: true} %>
      <% if @post.errors[:magazine_id].any? %>
        <div class="error-message">
          <%= @post.errors[:magazine_id].join(", ") %>
        </div>
      <% end %>
    </div>

    <div class="button-container">
      <%= f.submit (if @post.new_record?
                      @is_link ? "Add new link" : "Add new thread"
                    else
                      "Edit Post"
                    end), class: 'commentitem-button' %>
    </div>
  <% end %>
</div>

<script>
    function autoResize(textarea) {
        textarea.style.height = 'auto';
        if (textarea.scrollHeight > textarea.clientHeight) {
            textarea.style.height = (textarea.scrollHeight) + 'px';
        }
    }
</script>